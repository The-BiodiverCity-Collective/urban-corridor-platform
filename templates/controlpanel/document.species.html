{% extends "_base.html" %}
{% load i18n %}

{% block content %}

<h1 class="text-3xl mb-0">{% block title %}{{ _("Import species from document") }}{% endblock %}</h1>
<h2 class="font-normal">{{ info }}</h2>

<div class="flex gap-4 mb-7">
  <div class="flex-1 bg-lime-100 rounded p-3">
    <h2>
      <i class="fa fa-check-circle"></i>
      {{ _("The following columns will be imported:") }}
    </h2>
    {% if existing_features %}
    <ul class="pl-6 list-disc">
      {% for each in existing_features %}
      <li>{{ each }}</li>
      {% endfor %}
    </ul>
    {% else %}
      {{ _("No columns found.") }}
    {% endif %}
  </div>
  <div class="flex-1 bg-red-100 rounded p-3">
    <h2>
      <i class="fa fa-times-circle"></i>
      {{ _("The following columns will not be imported:") }}
    </h2>
    {% if nonexisting_features %}
    <ul class="pl-6 list-disc">
      {% for each in nonexisting_features %}
      <li>{{ each }}</li>
      {% endfor %}
    </ul>
    {% else %}
      {{ _("No columns found.") }}
    {% endif %}
  </div>
</div>

{% if new_species %}
  <div class="flex gap-4 mb-7">
    <div class="flex-1 bg-gray-100 rounded p-3">
      <h2>{{ _("New species") }}</h2>
      <p>{% blocktranslate %}A total of {{ species_count }} species were found in the spreadsheet.{% endblocktranslate %}
      {{ _("The following species will be created in our database. The rest already exists.") }}</p>
      <ul class="pl-6 list-disc">
      {% for each in new_species %}
        <li>{{ each }}</li>
      {% endfor %}
      </ul>
    </div>
  </div>
{% endif %}

<div class="items-center justify-center min-h-screen">
  <form method="post">

    <div class="space-y-12">

      <div class="border-b border-gray-900/10 pb-12">
        <h2 class="font-semibold text-gray-900">
          {{ _("Plant species from the spreadsheet") }}
        </h2>
        <div class="overflow-x-auto overflow-y-auto w-full" style="max-height:70vh">
          {{ df }}
        </div>
      </div>

    </div>

    <div class="sm:col-span-3 mb-10 mt-10">
      <label for="doc_type" class="block text-sm/6 font-medium text-gray-900">Vegetation type</label>
      <div class="mt-2">
        <select name="vegetation_type">
          <option value=""></option>
          {% for each in vegetation_types %}
            <option value="{{ each.id }}">{{ each }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="mt-6 flex items-center justify-between gap-x-6">
      <a class="btn-white" href="{% url "controlpanel_document_files" info.id %}">
        &laquo; {{ _("Back to file management") }}
      </a>
      <button type="submit" class="btn-green">
        {{ _("Import") }}
      </button>
    </div>
    {% csrf_token %}
  </form>

</div>

{% endblock %}
